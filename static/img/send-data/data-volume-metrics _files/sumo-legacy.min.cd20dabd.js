"use strict";var SumoUtil={},isUrlRegEx=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,isUrlRegExObj=new RegExp(isUrlRegEx),urlExtractRegex=/\b(?:https?):\/\/([^\s]+)/gi;SumoUtil.LOCAL_FORMAT_MAPPING={ymd:"yyyy/MM/dd HH:mm:ss.SSS ZZZZ",dmy:"dd/MM/yyyy HH:mm:ss.SSS ZZZZ",mdy:"MM/dd/yyyy HH:mm:ss.SSS ZZZZ"},SumoUtil.SearchStatusCode={NOT_STARTED:0,CREATE_IN_PROGRESS:1,CREATE_SUCCESS:2,CREATE_ERROR:31,CREATE_PARSE_ERROR:32,GATHERING_RESULTS:3,MANUALLY_PAUSED:6,FORCE_PAUSED:7,DONE_GATHERING_RESULTS:9,CANCELLED:12,ERROR:99},SumoUtil.metricsInvestigatePageName="metricsinvestigate",SumoUtil.dashboardPageName="dashboard",SumoUtil.lastPageVisit={name:null},SumoUtil.oldEntityParam="f",SumoUtil.newEntityParam="k",SumoUtil.getGlobalHighchartsOptions=function(t){return _.isUndefined(t)&&(t=(new Date).getTime()),{useUTC:!0,timezoneOffset:SumoApp.dateUtil.getUtcOffset(t),getTimezoneOffset:SumoApp.dateUtil.getUtcOffset}},SumoUtil.isStringEmpty=function(t){return void 0===t||_.isNull(t)||_.isEmpty(t)||_.isEmpty((""+t).trim())},SumoUtil.isValidEmail=function(t){return new RegExp(/^[\w\._+\-$!#%&'*/=?^_`.{|}]*@(?:[\w\-]+[\.]?)*[\w\-]\.[a-zA-Z]{1,24}$/).test(t)},SumoUtil.padZeros=function(t){var e="0000000000000000"+t;return e.substr(e.length-16)},SumoUtil.formatNumber=function(t,e,i){for(var n=(t+="").split("."),o=n[0],s=n.length>1?"."+n[1]:"",r=/(\d+)(\d{3})/;r.test(o);)o=o.replace(r,"$1,$2");if(s.length>0&&"number"==typeof e)try{s=Number(s).toFixed(e).substr(1)}catch(t){}return i&&(s=s.replace(/(0)+$/,"")),o+s},SumoUtil.fixDecimal=function(t,e){if(e){if(-1===(t+="").indexOf("."))return t;var i=Number(t);return"0"===(t=(t=i.toFixed(e)+"").split(".")[1])?parseInt(i):i.toFixed(e)}},SumoUtil.formatDouble=function(t,e){if(!SumoUtil.isNumber(t))return"";var i=Number(t);if(/E-\d+/g.test(t)||/E([2-9]\d+|1[6-9])/g.test(t)||Math.abs(i)>0&&Math.abs(i)<Number("1e-"+e))return i.toExponential(e);var n=i+"";return e&&(n=Number(i.toFixed(e).toString()).toString()),SumoUtil.formatNumber(n,e)},SumoUtil.formatNumberWithUnit=function(t,e){if(_.isNumber(t)&&(t=""+t),SumoUtil.isStringEmpty(t))return"";var i=Number(t),n="",o="",s=Math.abs(i);return s>=1e9?(n=(i/1e9).toFixed(1),o=e?"G":"B"):s>=1e6?(n=(i/1e6).toFixed(1),o="M"):s>=1e4?(n=(i/1e3).toFixed(1),o="K"):(n=e?(i/1e3).toFixed(1):t,o=e?"K":""),n=SumoUtil.removeTrailingZeros(n),SumoUtil.formatNumber(n)+o},SumoUtil.formatNumberWithUnitWideRange=function(t,e,i){if(_.isNumber(t)&&(t=""+t),SumoUtil.isStringEmpty(t))return"";var n=e?1024:1e3,o=Number(t),s="",r="",a=Math.abs(o);return a>=Math.pow(n,4)?(s=(o/Math.pow(n,4)).toFixed(i),r="T"):a>=Math.pow(n,3)?(s=(o/Math.pow(n,3)).toFixed(i),r="G"):a>=Math.pow(n,2)?(s=(o/Math.pow(n,2)).toFixed(i),r="M"):(s=(o/n).toFixed(i),r="K"),s=SumoUtil.removeTrailingZeros(s),SumoUtil.formatNumber(s)+r},SumoUtil.removeTrailingZeros=function(t){return SumoUtil.isStringEmpty(t)?"":t.replace(/\.0*$/,"")},SumoUtil.formatStorageValueinGB=function(t){return null!=t?SumoUtil.formatNumber(SumoUtil.fixDecimal(t/1024,1))+" GB":null},SumoUtil.isValidAlphaNumericName=function(t,e){return!SumoUtil.isStringEmpty(t)&&new RegExp("^([a-zA-Z0-9"+(e?"_":"")+"]+)$").test(t)},SumoUtil.isValidName=function(t,e){if(e=e||[],SumoUtil.isStringEmpty(t))return!1;var i=e.join("").replace(/]/g,"\\]");return new RegExp("^([a-zA-Z0-9 +%-@.,_()ㄱ-ㅎ|ㅏ-ㅣ|가-힣"+i+"]+)$").test(t)},SumoUtil.isValidObjectName=function(t,e){var i=[":"];return e&&i.push("*"),SumoUtil.isValidName(t,i)},SumoUtil.isValidFirstOrLastName=function(t){return!new RegExp('[/?!#$&*~`:;<>^\\\\|"]+').test(t)},SumoUtil.isValidUrl=function(t,e){return!SumoUtil.isStringEmpty(t)&&(!e||0===t.indexOf("http://")||0===t.indexOf("https://"))&&/\(?(?:(http|https):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?::(\d*))?(?=\/)?|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/g.test(t)},SumoUtil.isValidJSON=function(t){try{var e=JSON.parse(t);if(e&&"object"==typeof e)return!!e}catch(t){return!1}},SumoUtil.isValidJsonPayload=function(t){for(var e in t)if("error"===t[e].__annotation.severity)return!1;return!0},SumoUtil.isInteger=function(t){return!!SumoUtil.isNumber(t)&&parseFloat(t)==parseInt(t)},SumoUtil.isValidPort=function(t){var e=SumoUtil.isInteger(t);if(e){var i=parseInt(t);(i<0||i>65535)&&(e=!1)}return e},SumoUtil.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},SumoUtil.toNumber=function(t){return SumoUtil.isNumber(t)?Number(t):null},SumoUtil.round=function(t,e){if(t=parseFloat(t),isNaN(t))return t;e||(e=0);var i=Math.pow(10,e);return Math.floor(t*i+(t*i*10%10>=5?1:0))/i},SumoUtil.qtip_configuration=function(t,e){var i="sumo-qtip";return e&&(i+=" "+e),{content:t,position:{adjust:{method:"flip flip"},viewport:$(window)},style:{def:!1,classes:i}}},SumoUtil.qtip_configuration_above=function(t,e){var i=SumoUtil.qtip_configuration(t,e);return _.extend(i,{position:{at:"top center",my:"bottom center"}})},SumoUtil.getQueryParameterByName=function(t){var e=RegExp("[?&]"+t+"=([^&]*)").exec(window.location.search);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},SumoUtil.emptyElement=function(t){if(!(t.length<1)){t.children().off();for(var e=t.get(0);e.hasChildNodes();)e.removeChild(e.lastChild)}},SumoUtil.removeElement=function(t){t.length<1||(SumoUtil.emptyElement(t),t.off(),t.remove())},SumoUtil.destroyView=function(t){t.stopListening(),t.$el.off(),t.undelegateEvents(),t.$el.empty()},SumoUtil.createElementByTagName=function(t,e,i){return $(SumoUtil.createVanillaElement(t,e,i))},SumoUtil.createVanillaElement=function(t,e,i){var n=document.createElement(t);return n.setAttribute("class",e||""),n.setAttribute("id",i||""),n},SumoUtil.appendElementByTagName=function(t,e,i,n){var o=document.getElementsByTagName(t)[0],s=SumoUtil.createVanillaElement(e,i,n);return o.appendChild(s),$(s)},SumoUtil.convertLeadingSpaces=function(t,e){var i=t;if(!SumoUtil.isStringEmpty(t)){var n=""+(t.match(/^\s+/g)||""),o=n.length;e=e||"&nbsp;",i=n.replace(/\s/g,e)+t.substr(o)}return i},SumoUtil.strDefault=function(t,e){return SumoUtil.isStringEmpty(t)?SumoUtil.isStringEmpty(e)?"":e:t},SumoUtil.encode=function(t){return"string"==typeof t&&(t=(t||"").replace("&#8230","...")),$.encoder.encodeForHTML(t)},SumoUtil.encodeAttr=function(t){return $.encoder.encodeForHTMLAttribute(t)},SumoUtil.encodeForURL=function(t){return $.encoder.encodeForURL(t)},SumoUtil.toTitleCase=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},SumoUtil.shortenString=function(t,e,i){if(SumoUtil.isStringEmpty(t))return"";var n=t.length;if(n<=e)return t;if("middle"==(i||"middle")){var o=Math.floor(e/2)-3,s=e-o-3-3,r=n-o-3;return t.substring(0,s)+"..."+t.substring(r)}return t.substring(0,e-3)+"..."},SumoUtil.stripQuery=function(t){return(t=(t=(t=(t=t.replace(/(geo:\/\/)|(ip:\/\/)|(https:\/\/)|(http:\/\/)/g,"")).replace(/((?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:\/\/.*))/g,"")).replace(/"(?:[^"\\]|\\.)*"/g,".")).replace(/"[^\"]*"/g," ")).replace(/\n/g," ")},SumoUtil.getLeftPositionOfDialog=function(t){return($(window).width()-t)/2},SumoUtil.getTopPositionOfDialog=function(){var t=$(window).height();return SumoUtil.round(.1*t)},SumoUtil.formatMillis=function(t,e,i){var n=Math.floor(t/36e5);t-=36e5*n;var o=Math.floor(t/6e4);t-=6e4*o;var s=Math.floor(t/1e3);t-=1e3*s;var r="";if(r=e?sprintf("%02d:%02d:%02d.%03d",n,o,s,t%1e3):sprintf("%02d:%02d:%02d",n,o,s),i){for(;0==r.indexOf("00:");)r=r.substring(3);0==r.indexOf("0")&&2==r.indexOf(".")&&(r=r.substring(1))}return r},SumoUtil.pp=function(t){return SumoUtil.formatObjectForLog(t)},SumoUtil.formatObjectForLog=function(t){try{return JSON.stringify(t,(function(t,e){return t&&"remaining"===t?e.length:e}),2)}catch(t){$.logWarnLocal("Sumo.UI.formatObjectForLog - error: %s",t)}},SumoUtil.scrollElementIntoView=function(t,e){if($(e).offset()){var i=$(e).offset().top,n=t.offset().top,o=$(e).scrollTop(),s=i-n,r=n+t.height()-(i+$(e).height());if(t.height()>$(e).height()||s>0?$(e).scrollTop(o-s):r>0&&$(e).scrollTop(o+r),!(t.width()>$(window).width())){var a=$(e).offset().left,l=t.offset().left,u=$(e).scrollLeft(),c=a-l,m=l+t.width()-(a+$(e).width());$.log("INVISIBLEwidthLeft = %s",c),$.log("INVISIBLEwidthRight = %s",m),c>0?$(e).scrollLeft(u-c):m>0&&$(e).scrollLeft(u+m)}}},SumoUtil.debouncer=function(t,e,i,n){var o=null;return function(){o&&o.cancel&&o.cancel(),o=$.later(t,e,i,n)}},SumoUtil.getMockupText=function(t,e){var i=["The silent in the land heilsgeschichte were my Amish cousins conflict studies. Healing and hope by rights. Pass the peace at brothers. Playing the Mennonite game Nobel Peace Prize winner and EMU alumna Leymah Gbowee be devout servitude foreigners.","Teach all nations JYF is joyfully following Jesus adult baptism. Pass the peace their peace. Make a committee be chow chow. What we are called to do in the face of now GC.","The silent in the land Nobel Peace Prize winner and EMU alumna Leymah Gbowee or deciding by consensus on January 21, 1525, baptizing them 'twas global. Make a committee in alien. What we are called to do in the face of passive aggressive was piece by peace in the name of the Father and of the Son and of the Holy Spirit. On a journey be Old Mennonite Church.","Deciding by consensus with in the name of the Father and of the Son and of the Holy Spirit. Living More With Less or bonnebrugge. My 7 roommates that Pink Menno. Teach all nations now Mennonite Central Committee. The silent in the land tongue screw which was on a journey Open Letter, come to agreement in Gethsemane. Mediating that fellowship.","Teach all nations potluck let's singing hymns GC, is in the world, but not of it 'twas borscht. On a journey Mennonite Meccas which was living More With Less brothers and sisters in Christ. Making More with Less Gethsemane by longing for a greater experience Ethiopia."],n=i[Math.floor(Math.random()*i.length)],o=n.substr(0,n.indexOf(" ",t+Math.floor(Math.random()*(e-t))));return o&&"."!=o.trim().charAt(o.trim().length-1)&&(o+="!"),o},SumoUtil.getUIBlockOptions=function(t){var e={ignoreIfBlocked:!0,baseZ:999988,fadeIn:null,fadeOut:null,css:{"border-radius":"8px"}},i=[];return i.push('<div class="spinner is-visible"></div>'),t&&(i.push('<div style="display: inline-block; padding-left: 10px;">'),i.push(t),i.push("</div>"),e.css["line-height"]="16px"),e.message=i.join(""),e},SumoUtil.blockPage=function(t){var e=SumoUtil.getUIBlockOptions(t);t?(e.css["min-width"]="350px",e.css.padding=20,e.css["font-size"]="13px"):(e.css.width="20px",e.css.padding=20,e.css.left="50%");try{$.blockUI(e)}catch(t){}},SumoUtil.unblockPage=function(){try{$.unblockUI({fadeOut:null})}catch(t){}},SumoUtil.blockElement=function(t,e){var i=SumoUtil.getUIBlockOptions(e);e?(i.css.width="90%",i.css.padding=10,i.css["font-size"]="12px"):(i.css.width="20px",i.css.padding=5);try{t.block(i)}catch(t){$.log("Error in blockElement - %s",t)}},SumoUtil.unblockElement=function(t){try{t.unblock({fadeOut:null})}catch(t){}},SumoUtil.addMoreAndLessLinksForText=function(t,e,i,n){i=i||"<span class='text-more-less-parenthesis'>(</span>more<span class='text-more-less-parenthesis'>)</span>",n=n||"<span class='text-more-less-parenthesis'>(</span>less<span class='text-more-less-parenthesis'>)</span>",e=e||100;var o=$(t),s=o.text(),r="more-less-"+ +new Date%1e4;if(e>-1&&s.length>e){var a="text-more-"+r,l="text-less-"+r,u="text-more-link-"+r,c="text-less-link-"+r;o.text("").append("<span class='text-less' id='"+l+"'>"+s.substr(0,e)+"...</span>").append("<span class='text-more' id='"+a+"'>"+s+"</span>");var m=$("<span class='text-more-link' id='"+u+"'>"+i+"</span>").on("click",(function(t){$(this).hide(),$("#"+c).show(),$("#"+l).hide(),$("#"+a).show()}));o.append(m);var d=$("<div class='text-less-link' id='"+c+"'>"+n+"</div>").on("click",(function(t){$(this).hide(),$("#"+u).show(),$("#"+l).show(),$("#"+a).hide()}));o.append(d)}return o},SumoUtil.logPageVisit=function(t,e,i,n){if(SumoUtil.isStringEmpty(t)&&(t=document.location.hash),SumoUtil.isStringEmpty(i)&&(i=i||document.location.href),SumoUtil.isStringEmpty(n)&&(n=null),"metrics"===t&&"undefined"!=typeof SumoApp&&SumoApp.priv.hasFlagUIMetricsCapability()&&(t=e=SumoUtil.metricsInvestigatePageName),$.logUserAction){if(SumoUtil.lastPageVisit){var o=SumoUtil.formatMillis(+new Date-SumoUtil.lastPageVisit.ts),s={pageName:SumoUtil.lastPageVisit.name,duration:o,url:SumoUtil.lastPageVisit.url};SumoUtil.lastPageVisit.params&&(s.extra=SumoUtil.lastPageVisit.params),$.logUserAction("Page exited "+$.logFormatObject(s))}SumoUtil.lastPageVisit={name:t,url:i,extra:n,ts:+new Date};var r={pageName:t,url:i};n&&(r.extra=n),$.logUserAction("Page visited "+$.logFormatObject(r))}if(!SumoUtil.isStringEmpty(e)){var a="unknown";if("undefined"!=typeof SumoApp)try{var l=SumoApp.user.userInfo,u=l.accountType;_.contains(["enterprise","professional","free"],u)?a=l.accountType:"slftrial"===l.accountType?a="free":(l.isEnterprise||l.isTrial)&&(a="enterprise")}catch(t){}e="/_virtualpageview/sumologic/"+a+"/"+e,SumoUtil.trackerVisitPage(t,e,n)}},SumoUtil.isDevMode=function(){var t=document.location.protocol,e=document.location.host;return"file:"===t||0===e.indexOf("localhost")},SumoUtil.trackerVisitPage=function(t,e,i){var n=SumoUtil.isDevMode(),o=SumoUtil.isIntercomEnabled();n&&!o?$.log("SumoUtil.trackerVisitPage - Skipping with url ["+e+"], name ["+t+"] and params ["+i+"]"):setTimeout((function(){try{n||"function"!=typeof mktoMunchkinFunction||mktoMunchkinFunction("visitWebPage",{url:e,name:t,params:i})}catch(t){$.log("SumoUtil.trackerVisitPage - Munchkin error: %s",t)}SumoUtil.updateIntercomState(t),SumoUtil.sendIntercomEvent("page-visit-"+t,{sumo_url:e,sumo_page_name:t,sumo_page_params:i})}),100)},SumoUtil.isIntercomEnabled=function(){return void 0!==window.SumoApp&&SumoApp.priv.hasFlagUIIntercomWidgetOverride()&&!_.isUndefined(window.Intercom)},SumoUtil.updateIntercomState=function(t){if(SumoUtil.isIntercomEnabled()&&SumoApp.intercom&&SumoApp.intercom.loaded){var e=(t=void 0===t?SumoUtil.lastPageVisit.name:t)!==SumoUtil.dashboardPageName;e&&!SumoApp.intercom.running?(window.Intercom("boot",SumoApp.intercom.config),SumoApp.intercom.running=!0):!e&&SumoApp.intercom.running&&(window.Intercom("shutdown"),SumoApp.intercom.running=!1)}},SumoUtil.sendIntercomEvent=function(t,e){if(SumoUtil.isIntercomEnabled())try{window.Intercom("trackEvent",t,e),setTimeout((function(){SumoApp.intercom.running&&window.Intercom("update")}),500)}catch(t){$.logWarn("SumoUtil.trackerVisitPage Intercom.update - Error: %s",t)}},SumoUtil.trackEvent=function(t,e){var i={sumo_event_name:t,sumo_url:document.location.href};e&&(i.sumo_event_params=e),SumoUtil.sendIntercomEvent("event-"+t,i)},SumoUtil.TimeValue=function(t,e){var i={hour:36e5,minute:6e4,second:1e3,milli:1},n=i[e]&&e||"milli";return{value:t=t||0,unit:e=i[n],unitKey:n,toMillis:function(){return t*e},getBiggestWholeUnit:function(){var t=this.toMillis(),e=_.find(_.pairs(i),(function(e){return t/e[1]%1==0}));return _.isEmpty(e)?new SumoUtil.TimeValue(t/i.second,"second"):new SumoUtil.TimeValue(t/e[1],e[0])}}},SumoUtil.setMenuPosition=function(t,e,i,n,o,s,r,a){i.removeClass("menu-tip-top menu-tip-bottom menu-tip-left menu-tip-center menu-tip-right left-submenu");var l=i.width(),u=i.height(),c=($(window).width(),$(window).height());a||(a=$(window).scrollLeft());var m="menu-tip-top",d=e+5,p=c+$(window).scrollTop()-e,h=parseInt(i.find("ul li").first().css("lineHeight"));p<u+50||r?(d=i.offset().top<0?e-u:r?i.offset().top-5:d-u-h/2,m="menu-tip-bottom",i.offset({top:d})):i.css("top",d-1);var f="menu-tip-center",g=3*l,S=t-l/2;(t-a<=g+50||s)&&(S=t-5+(s?10:0),f="menu-tip-left");var v=i.parent().offset().left+i.parent().width()-t;if((v<g+50||o)&&(S=t-l+5,f="menu-tip-right"),i.addClass(m),i.addClass(f),i.offset({left:S}),"getSubMenuWidth"in n){var b,U="right",_="bottom",E=n.getSubMenuWidth(),y=n.getSubMenuHeight();v<g+E+50&&(U="left",i.addClass("left-submenu")),p<u+y+50?(_="top",b=c-p-2*h):b=p,n.adjustMaxHeightSubMenu(b);var w=n.getMenuModel();w&&(w.setSubMenuPositionH(U),w.setSubMenuPositionV(_))}},SumoUtil.scrubQueryText=function(t){return new RegExp(/\W/).test(t)?'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':t},SumoUtil.createArrayWithDefaultValue=function(t,e){for(var i=new Array(t),n=t-1;n>=0;--n)i[n]=e;return i},SumoUtil.appendToSearchExpression=function(t,e){var i=t.split(/\r\n|\r|\n/);return i[i.length-1].replace(/(geo:\/\/)|(ip:\/\/)|(isp:\/\/)|(https:\/\/)|(http:\/\/)/g,"").match(/(?:\/\/.*)/g)?t+"\n"+e:t+" "+e},SumoUtil.hookupColorPicker=function(t){var e={flat:!1,showInput:!0,showInitial:!0,showAlpha:!1,showPalette:!0,showPaletteOnly:!1,showSelectionPalette:!1,hideAfterPaletteSelect:!0,clickoutFiresChange:!1,showButtons:!0,preferredFormat:"hex",palette:t.palette},i=t.color,n=t.elm,o=_.defaults(t,e);SumoUtil.isStringEmpty(i)&&t.nullColor&&(o.color=t.nullColor),n.spectrum(o)},SumoUtil.getMatchingTextColor=function(t){if(t){var e=new RGBColor(t);return SumoUtil.calcBrightness(e)<130?"#FFFFFF":"#000000"}return"#000000"},SumoUtil.calcBrightness=function(t){return Math.sqrt(t.r*t.r*.299+t.g*t.g*.587+t.b*t.b*.114)},SumoUtil.localeDateFormat=function(t){if(!t){if("undefined"!=typeof SumoApp){var e=SumoApp.user.userPreferencesModel.get("dateLocaleFormat");if(e&&"auto"!==e)return e}t=new Date(1980,5,24).toLocaleDateString()}var i=t.indexOf("1980"),n=t.indexOf("6"),o=t.indexOf("24");-1===o&&(o=t.indexOf("Jun"));var s="ymd";return i<n&&n<o?s="ymd":n<o&&o<i?s="mdy":o<n&&n<i&&(s="dmy"),s},SumoUtil.completeLocaleDateFormat=function(t){return SumoUtil.LOCAL_FORMAT_MAPPING[SumoUtil.localeDateFormat(t)]},SumoUtil.getFormatterForDateInput=function(){var t=null,e=null;switch(SumoUtil.localeDateFormatValue?e=SumoUtil.localeDateFormatValue:(e=SumoUtil.localeDateFormat(),SumoUtil.localeDateFormatValue=e),e){case"dmy":t=SumoApp.dateUtil.format(SumoApp.dateUtil.FORMATS.DATE_TIME_DMY);break;case"ymd":t=SumoApp.dateUtil.format(SumoApp.dateUtil.FORMATS.DATE_TIME_YMD);break;default:t=SumoApp.dateUtil.formatDateTime(!0)}return t},SumoUtil.formatTimeRangeText=function(t,e,i){if(_.isUndefined(t)||_.isUndefined(e))return"";var n=null;return(n=_.isBoolean(i)&&i?SumoUtil.getFormatterForDateInput():SumoApp.dateUtil.formatDateTime())(t)+" to "+n(e)},SumoUtil.formatTimestamp=function(t){return SumoApp.dateUtil.formatDateTime()(t)},SumoUtil.randomNumberBetween=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},SumoUtil.isChrome=function(){var t=window.chrome,e=window.navigator.vendor;return null!==t&&"Google Inc."===e},SumoUtil.upperCaseFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},SumoUtil.isValidColor=function(t){$("#sumoapp").append('<div id="color-test-div">Hello World</div>');var e,i=$("#color-test-div"),n=i.css("color");i.css("color",t);var o=i.css("color");return e=t==n||"rgb(56, 56, 56)"==t||"#383838"==t||o!=n&&"rgb(56, 56, 56)"!=o&&"#383838"!=o,$("#color-test-div").remove(),e},SumoUtil.longIdToHex=function(t,e){var i=null;if(e=void 0!==e?e:16,!_.isString(t)||_.isEmpty(t))return i;try{new BigNumber(t).isNegative()?i=SumoUtil.negativeDecimalToHex(t,64):(i=new BigNumber(t).toString(16).toUpperCase()).length<e&&(i=_(e-i.length).times((function(t){return"0"})).join("")+i)}catch(t){$.logWarnLocal(t)}return i},SumoUtil.negativeDecimalToHex=function(t,e){var i=new BigNumber(new BigNumber(t).abs()).toString(2).split("");e>i.length&&(i=_(e-i.length).times((function(t){return"0"})).concat(i));var n=_.map(i,(function(t){return"0"===t?"1":"0"}));return new BigNumber(n.join(""),2).plus(1,2).toString(16).toUpperCase()},SumoUtil.isElementOrDescendant=function(t,e){return t.is(e)||t.parents(e).length>0},SumoUtil.requestFullScreen=function(){document.documentElement.requestFullscreen()},SumoUtil.onOneFullScreenChange=function(t){$(document).one("fullscreenchange",t)},SumoUtil.offFullScreenChange=function(){$(document).off("fullscreenchange")},SumoUtil.isFullScreen=function(){return!!document.fullscreenElement},SumoUtil.fuzzId=function(t){return 13*t^16777215},SumoUtil.unfuzzId=function(t){return(16777215^t)/13},SumoUtil.getDashboardURL=function(t,e,i,n){var o=SumoApp.context.userInfo.isDevEnv&&-1!==document.location.toString().indexOf("_dev.html"),s=SumoApp.context.userInfo.isDevEnv&&-1!==document.location.toString().indexOf("fonts.html"),r=s?"dashboard-fonts.html":(o?"_":"")+"dashboard.html",a=document.location.protocol+"//"+document.location.host+"/ui/"+r;return"file:"===location.protocol&&(a=location.protocol+"//"+location.pathname.substr(0,location.pathname.lastIndexOf("/"))+"/"+r),a+="?v="+("undefined"!=typeof ProjectVersion?ProjectVersion:(new Date).getTime()),a+=n?"&k="+n:"&f="+SumoUtil.fuzzId(t),_.isString(i)&&!_.isEmpty(i.trim())&&(a+="&t="+i.charAt(0).toLowerCase()),a+=e?"&w="+e:"",s&&(a+="&font="+window.sumoFontIdx),a},SumoUtil.getSimpleDashboardURL=function(t,e,i){var n=i?"%s//%s/ui/dashboard.html?k=%s&t=%s":"%s//%s/ui/dashboard.html?f=%s&t=%s",o=document.location.protocol,s=document.location.host,r=SumoUtil.fuzzId(t),a="d";return _.isString(e)&&!_.isEmpty(e.trim())&&(a=e.trim().charAt(0).toLowerCase()),sprintf(n,o,s,i||r,a)},SumoUtil.getSumoMainURL=function(t){var e="%s//%s/ui/#section/"+(t?"metrics":"search"),i=document.location.protocol,n=document.location.host;return sprintf(e,i,n)},SumoUtil.getBentoURL=function(){var t=document.location.protocol,e=document.location.host;return sprintf("%s//%s/ui/",t,e)},SumoUtil.getLiveTailPopoutURL=function(t){var e=document.location.protocol,i=document.location.host;return sprintf("%s//%s/ui/livetail.html?ltp=%s",e,i,t)},SumoUtil.isActivationUrl=function(){return location.search.indexOf("activation=")>-1||location.search.indexOf("/activate")>-1},SumoUtil.isForcedMetricsSourceBlacklisted=function(){var t=location.search.indexOf("forceSourceBlacklist=");if(t>-1){var e=location.search.indexOf("&",t);e=-1===e?void 0:e;var i=location.search.slice(t+21,e);return decodeURIComponent(i).split(",")}return!1},SumoUtil.getCollectorMajorVersion=function(t){var e=t.split(".");return Number(e[0])},SumoUtil.getCollectorMinorVersion=function(t){var e=t.split(".");return 0===e.length?0:Number(e[1].split("-")[0])},SumoUtil.getCollectorPatchVersion=function(t){var e=t.split(".");return 0===e.length?0:Number(e[1].split("-")[1])},SumoUtil.checkMinCollectorVersionSupport=function(t,e){var i=SumoUtil.getCollectorMajorVersion(t),n=SumoUtil.getCollectorMinorVersion(t),o=SumoUtil.getCollectorPatchVersion(t),s=SumoUtil.getCollectorMajorVersion(e),r=SumoUtil.getCollectorMinorVersion(e),a=SumoUtil.getCollectorPatchVersion(e);return i!==s?i>s:n!==r?n>r:o>=a},SumoUtil.animateCSS=function(t,e,i){if(i=i||$.noop(),Modernizr.csstransitions){if(t.length>0){var n="animated "+e;t.addClass(n).one("animationend",(function(){t.removeClass(n),i&&i()}))}}else i()},SumoUtil.getCSSName=function(t,e){var i=t.substring(1);return e&&(i=sprintf(i,e)),i},SumoUtil.getScrollBarWidth=function(){var t=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),e=$("<div>").css({width:"100%"}).appendTo(t).outerWidth();return t.remove(),100-e};var SumoError=function(t,e){this.name="SumoError",this.message=t||"SumoError",e&&_.extend(this,e)};SumoError.prototype=new Error,SumoError.prototype.constructor=SumoError,SumoUtil.getEntityId=function(){var t=SumoUtil.getQueryParameterByName(this.oldEntityParam),e=SumoUtil.getQueryParameterByName(this.newEntityParam);return t?SumoUtil.unfuzzId(t):e||0},SumoUtil.getLiveTailId=function(){return SumoUtil.getQueryParameterByName("ltp")},SumoUtil.getEntityType=function(){return this.forcedEntityType?this.forcedEntityType:SumoUtil.getQueryParameterByName(this.oldEntityParam)?this.oldEntityParam:this.newEntityParam},SumoUtil.setEntityType=function(t){this.forcedEntityType=t?this.newEntityParam:this.oldEntityParam},SumoUtil.escapeForJquery=function(t){return t.replace(/(:|\.|\[|\]|,|\\)/g,"\\$1")},SumoUtil.escapeQuotes=function(t){return t.replace(/(")/g,"\\$1")},SumoUtil.escapeRegExp=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},SumoUtil.isUrl=function(t){return isUrlRegExObj.test(t)},SumoUtil.extractURL=function(t){return t.match(urlExtractRegex)},SumoUtil.parseMarkDownUrl=function(t){return t.replace(/\[(.+?)\]\((.+?)\)/g,"$1<>$2").split("<>")},SumoUtil.hasWindowPerformance=function(){return void 0!==window.performance&&void 0!==window.performance.mark&&void 0!==window.performance.measure},SumoUtil.canShowPublic=function(){return/\/dashboard.html/.test(window.location.href)},SumoUtil.isDashboardUrl=function(){return $("#dashboard").length>0},SumoUtil.isLiveTailPopoutUrl=function(){return window.location.href.match("livetail.html")&&window.location.search.match(/ltp=\d+/)},SumoUtil.isLightDashboard=function(){return SumoUtil.lightDashboard},SumoUtil.SEARCH_MESSAGE_TABLE_PAGE_LOG="SEARCH_MESSAGE_TABLE_PAGE_LOG:",SumoUtil.PAGE_CHANGE_LOG="PAGE_CHANGE_LOG",SumoUtil.NON_CONTINUOUS_PAGE_ACCESS_LOG="NON_CONTINUOUS_PAGE_ACCESS:",SumoUtil.LAST_PAGE_ACCESS_LOG="LAST_PAGE_ACCESS",SumoUtil.PAGE_MORE_THAN_LOG="PAGE_MORE_THAN_%s",SumoUtil.messsagePageEntities=[],SumoUtil.setMessagePageAnalysisData=function(t,e){SumoUtil.clearMessagePageAnalysisData(e),SumoUtil.messsagePageEntities.push({id:t,moreThan20:!1,moreThan50:!1,moreThan100:!1,lastPageAccess:!1})},SumoUtil.clearMessagePageAnalysisData=function(t){SumoUtil.messsagePageEntities=_.without(SumoUtil.messsagePageEntities,_.findWhere(SumoUtil.messsagePageEntities,{id:t}))},SumoUtil.logSearchMessagePageAccess=function(t,e,i,n){$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+this.PAGE_CHANGE_LOG);var o=e-i;Math.abs(o)>1&&$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+this.NON_CONTINUOUS_PAGE_ACCESS_LOG+(o>0?"f:":"b:")+o);var s=_.find(SumoUtil.messsagePageEntities,{id:t});e!==n-1||s.lastPageAccess||(s.lastPageAccess=!0,$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+this.LAST_PAGE_ACCESS_LOG)),s&&(e>99&&!s.moreThan100&&(s.moreThan100=!0,$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+sprintf(this.PAGE_MORE_THAN_LOG,100))),e>49&&!s.moreThan50&&(s.moreThan50=!0,$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+sprintf(this.PAGE_MORE_THAN_LOG,50))),e>19&&!s.moreThan20&&(s.moreThan20=!0,$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+sprintf(this.PAGE_MORE_THAN_LOG,20))),e>9&&!s.moreThan10&&(s.moreThan10=!0,$.logInfo(this.SEARCH_MESSAGE_TABLE_PAGE_LOG+sprintf(this.PAGE_MORE_THAN_LOG,10))))},SumoUtil.getByteCount=function(t){return encodeURI(t).split(/%..|./).length-1},SumoUtil.searchDrilldownTrigger=function(t,e){SumoApp.applicationView.onDrilldownSearch({},t)},SumoUtil.IS_EXTERNAL_LOOKUP=4,SumoUtil.updateUrlSearchQuery=function(t,e){var i,n=location.search,o=new RegExp("[?&]"+t),s=n.match(o);if(s){var r=n.slice(0,s.index+1),a=sprintf("%s=%s",t,e),l=n.indexOf("&",s.index+1);if(-1!==l){var u=n.slice(l);n=r+a+u}else n=r+a}else n=""===n?sprintf("?%s=%s",t,e):sprintf("%s&%s=%s",n,t,e);i=sprintf("%s%s%s%s",location.origin,location.pathname,n,location.hash),window.history.pushState(null,null,i)},SumoUtil.convertToKeyValueObjectList=function(t,e,i){var n=[],o=!1;return(t=(""+t).trim())&&t.split(e).forEach((function(t){if(!o){var e=(""+t).trim().split(i),s=(""+e[0]).trim(),r=(""+e[1]).trim();2===e.length&&s&&r?n.push({name:s,value:r}):o=!0}})),{list:n,error:o}},SumoUtil.isEmbedded=function(){return window.self!==window.top},window.SumoUtil=SumoUtil,window.SumoError=SumoError,function(t){var e=_.template('<div class="spinner-message <%attr= states %>"><div class="spinner <%= secondary ? \'-secondary\' : \'\' %> is-visible"></div><div class="spinner-message__message"><%= message %></div></div>'),i=_.template("<div class=\"spinner <%= states %> <%= secondary ? '-secondary' : '' %> is-visible\"></div>");t.widget("sumo.spinner",{options:{message:"",visible:!1,previousContent:"",previousWidth:"",spinningContent:"",spinningWidth:null,buttonMode:!1,secondarySpinner:!1},_getStates:function(){return this.options.visible?"is-visible":""},_create:function(){var t=this.element.attr("data-spinner"),n=this.element.text(),o=this.element.hasClass("sumo-button"),s=this.element.hasClass("is-visible"),r=this.options.secondarySpinner;this.options.previousContent=n,_.isEmpty(t)?this.options.message=n:this.options.message=t,o?(this.options.buttonMode=o,this.options.visible=!0,this.options.previousWidth=this.element.width(),this.options.spinningWidth=this.options.previousWidth+26,r=!this.element.hasClass("-secondary"),this.options.spinningContent=i({states:this._getStates(),secondary:r})):(this.options.visible=s,this.options.spinningContent=e({states:this._getStates(),message:this.options.message,secondary:r}),this.element.html(this.options.spinningContent))},start:function(){var t=this.element,e=this.options.spinningContent;t.html(e).addClass("is-spinning")},stop:function(){var t=this.element,e=this.options.previousContent;t.removeClass("is-spinning").html(e)},show:function(t){t&&"multiline"===t&&this.element.find(".spinner").addClass("-multiline"),this.toggle(!0)},hide:function(){this.toggle(!1)},toggle:function(t){this.options.visible=t,this.element.children(".spinner-message").toggleClass("is-visible",t)},updateMessage:function(t,e){this.options.message=t;var i=this.element.find(".spinner-message__message");e?i.html(t):i.text(t)},_setOption:function(t,e){"visible"===t?this.toggle(e):"message"===t?this.updateMessage(e):this.options[t]=e},destroy:function(){t.Widget.prototype.destroy.call(this)}}),t.widget("sumo.togglerButton",{options:{wrapperClass:"switch-button",thumbClass:"switch-thumb",onClass:"on",animationSpeed:100,enabled:!1},_create:function(){this.toggle=this.toggle.bind(this),this.setEnabled=this.setEnabled.bind(this),this.element.addClass(this.options.wrapperClass).toggleClass(this.options.onClass,this.options.enabled).html(t("<div/>",{class:this.options.thumbClass})).on("click",this.toggle).on("enabled",this.setEnabled)},toggle:function(){this.options.enabled=!this.options.enabled,this._update()},setEnabled:function(t){this.options.enabled=!!t,this._update()},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){this.element.toggleClass(this.options.onClass,this.options.enabled,this.options.animationSpeed),this.element.trigger("change",this.options.enabled)},destroy:function(){this.element.removeClass(this.options.wrapperClass).text("").off("click",this.toggle),t.Widget.prototype.destroy.call(this)}}),t.widget("sumo.editableIndicator",{options:{indicatorClass:"editable-indicator",enabled:!0,defaultPosition:{my:"right center",at:"right+6 center"},appendTo:"body"},_create:function(){var e=t(this.options.appendTo);this.$indicator=t("<div/>",{class:this.options.indicatorClass}).appendTo(e),_.bindAll(this,"toggleIndicator","_triggerElementClick"),this._update()},toggleIndicator:function(e){if(!e||e.relatedTarget!==this.$indicator.get(0)&&e.relatedTarget!==this.element.get(0))if(this.options.enabled&&e&&"mouseenter"===e.type){var i=t.extend({of:this.element},this.options.defaultPosition),n=this.element.height();this.$indicator.css({height:n,"line-height":n+"px"}).addClass("show").position(i)}else this.$indicator.removeClass("show")},_triggerElementClick:function(){this.element.trigger("click")},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){this.options.enabled?(this.element.on("mouseenter mouseleave",this.toggleIndicator),this.$indicator.on("mouseenter mouseleave",this.toggleIndicator).on("click",this._triggerElementClick)):(this.$indicator.removeClass("show").off("mouseenter mouseleave",this.toggleIndicator).off("click",this._triggerElementClick),this.element.off("mouseenter mouseleave",this.toggleIndicator))},destroy:function(){this.$indicator.remove(),this._setOption("enabled",!1),t.Widget.prototype.destroy.call(this)}});var n=_.template('<input type="button" class="group-button <%= choice.id === selected ? "" : "secondary-button" %> <%= disabled ? "btn-disabled" : "" %> <%= choice.isEditable ? "editable" : "" %> " title="<%attr= choice.title %>" value="<%attr= choice.label %>" data-value="<%attr= choice.value %>" <% if(choice.isEditable) { %> data-editable="<%attr= choice.editable %>" <% } %> data-id="<%attr= choice.id %>" />');t.widget("sumo.buttonGroup",{options:{choices:[],name:null,selected:null,initialValue:null},$buttonContainer:null,$editableInput:null,_getButtonHTML:function(t){return n(t)},_getOptionsHTML:function(){var t=this;return _.map(this.options.choices,(function(e){var i={choice:e,selected:t.options.selected,disabled:e.disabled||t.options.disabled};return t._getButtonHTML(i)})).join("")},_findLabelFor:function(t){return this.element.find('label[for="'+t+'"]')},_buttonClicked:function(e){if(!this.options.disabled){var i=t(e.currentTarget),n=i.attr("data-id"),o=i.attr("data-editable"),s=!_.isUndefined(o)&&!1!==o;if(n!==this.options.selected){var r=this.getChoice(n);if(r.disabled)return;s&&r&&SumoUtil.isStringEmpty(r.editable)&&!SumoUtil.isStringEmpty(r.editableDefault)&&this._updateEditableOption(r,r.editableDefault),this._setOption("selected",n),this.element.find("#"+n).prop("checked",!0)}else s&&this._handleEditableButton(i,o,e)}},_handleEditableButton:function(e,i,n){var o=t('<div class="editable-choice-container">').appendTo(this.element).position({my:"left top",at:"left top",of:e}),s=t('<input type="text" class="editable-choice-field" />').val(i).appendTo(o).trigger("focus");this.getSelectedOptionButton().width(s.width()-10),s.on("keyup",this._handleEditableKeyup),s.on("blur",this._handleEditableBlur),this.$editableInput=s},_clearEditableInput:function(){this.$editableInput.off().remove(),this.$editableInput=null,this.getSelectedOptionButton().width("")},_updateEditableOption:function(t,e){t.editable=e,t.label=SumoUtil.isStringEmpty(e)?t.originalLabel:e,this.element.trigger("change",t)},_handleEditableKeyup:function(e){var i=e.which,n=t.ui.keyCode;if(i===n.ENTER){var o=this.$editableInput.val();this._updateEditableOption(this.getSelectedOption(),o),this._clearEditableInput(),this._update()}else i===n.ESCAPE&&(this._clearEditableInput(),e.stopPropagation())},_handleEditableBlur:function(t){var e=this.$editableInput.val();SumoUtil.isStringEmpty(e)||this._updateEditableOption(this.getSelectedOption(),e),this._clearEditableInput(),this._update()},_setInitialSelected:function(t){var e=this.options.selected;if(!e){var i=this.options.initialValue;if(i){var n=_.find(t,(function(t){return t.value===i}));n&&(e=n.id)}if(!e){var o=this.element.find("input:checked");e=o.length>0?o.attr("id"):_.first(t).id}}e&&this.element.find("#"+e).prop("checked",!0),this.options.selected=e},_setEditableIndicator:function(){var t=this.element.find(".editable");t.length>0&&t.editableIndicator({appendTo:this.element.find(".button-group-container"),defaultPosition:{my:"right center",at:"right-5 center"}})},_destroyEditableIndicator:function(){var t=this.element.find(".editable");t.length>0&&t.editableIndicator("destroy")},_create:function(){_.bindAll(this,"_buttonClicked","_handleEditableButton","_handleEditableKeyup","_handleEditableBlur");var e=this;this.element.attr("data-button-group")&&(this.options.name=this.element.attr("data-button-group"));var i=[];this.element.find('[type="radio"]').each((function(n,o){var s=t(o),r=s.attr("name",e.options.name).attr("id"),a=s.attr("data-editable"),l=s.attr("data-editable-default"),u=!_.isUndefined(a)&&!1!==a,c=e._findLabelFor(r).text(),m=SumoUtil.isStringEmpty(a)?c:a,d=s.is(":disabled"),p=s.attr("title")||"";i.push({id:r,value:s.val(),originalLabel:c,label:m,isEditable:u,editable:a,editableDefault:l,disabled:d,title:p})})),i.length>0&&(this._setInitialSelected(i),this.element.children().hide(),this.$buttonContainer=t('<div class="button-group-container" />').appendTo(this.element),this._setOption("choices",i),this.$buttonContainer.on("click","input",this._buttonClicked))},_setOption:function(t,e){this.options[t]=e,this._update(),"selected"===t&&this.element.trigger("change",this.getSelectedOption())},_update:function(){this._destroyEditableIndicator(),this.$buttonContainer.html(this._getOptionsHTML()),this._setEditableIndicator()},getChoice:function(t){return _.find(this.options.choices,(function(e){return e.id===t}))},getSelectedOption:function(){var t=this.options.selected;return this.getChoice(t)},getSelectedOptionButton:function(){var t=this.getSelectedOption();return this.element.find(sprintf('[data-id="%s"]',t.id))},value:function(t){if(t){var e=_.find(this.options.choices,(function(e){return e.value===t}));return e&&(this.options.selected=e.id,this._update(),this.element.find("#"+e.id).prop("checked",!0)),this.element}return this.getSelectedOption().value},destroy:function(){this._destroyEditableIndicator(),this.$buttonContainer&&this.$buttonContainer.off().remove(),this.element.children().show(),t.Widget.prototype.destroy.call(this)}}),t.widget("sumo.progressBar",{options:{progress:0,barClass:"default"},_create:function(){this.element.addClass("progress-bar"),this._render(),this._update()},_render:function(){this.element.html(sprintf('<div class="progress %s"></div>',this.options.barClass))},_setOption:function(t,e){this.options[t]=e,this._update()},_update:function(){var t=this.options.progress;if(!_.isNumber(t)||t<0||t>100)throw new Error("sumo.progressBar: progress must be a number between 0 and 100.");var e=this.element.find(".progress");e.hasClass(this.options.barClass)||e.removeClass().addClass("progress "+this.options.barClass),0!==t&&100!==t||e.width(""),0===t?this._render():100===t?e.addClass("done"):e.width(t+"%").removeClass("done")},destroy:function(){t.Widget.prototype.destroy.call(this)}})}(jQuery),jQuery.fn.putCursorAtEnd=function(){return this.each((function(){var t=$(this),e=this;t.is(":focus")||t.trigger("focus");var i=2*t.val().length;setTimeout((function(){e.setSelectionRange(i,i)}),1),this.scrollTop=999999}))},$.widget("ui.sumocomplete",{options:{returnVal:null,returnPos:null,minWidth:400,editor:null,helpTooltip:"Click to view help in a separate window [I18N]",forceDefaultWidth:!1},_create:function(){this.options.returnVal=this.options.returnVal||function(){return""},this.options.returnPos=this.options.returnPos||function(){return{}};var t,e=this,i=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).on("keydown.autocomplete",(function(i,n){if(e.refreshNoFirstFocusFlag=!1,e.options.disabled||e.element.attr("readonly"))return!1;i.keyCode||(i=n.event);var o=n.result,s=null;t=!1;var r=$.ui.keyCode,a=e.menu.element&&e.menu.element.children(".sumocomplete-item").length>0;switch(i.keyCode){case r.UP:a&&(e._move("previous",i),i.preventDefault(),s=!0);break;case r.DOWN:a&&(e._move("next",i),i.preventDefault(),s=!0);break;case r.ENTER:case 108:case r.TAB:e.menu.active&&(t=!0,i.preventDefault(),s=!0,e.menu.select(i));break;case r.ESCAPE:e.element.val(e.term),e.close(i),s=!0;break;default:clearTimeout(e.searching),e.searching=setTimeout((function(){e.term!=e.options.returnVal()&&(e.selectedItem=null,e.search(null,i))}),e.options.delay)}return o.result=s,!s&&void 0})).on("keypress.autocomplete",(function(e,i){e.keyCode||(e=i.event);var n=i.result;t&&(t=!1,e.preventDefault(),n.result=!0)})).on("focus.autocomplete",(function(){e.options.disabled||(e.selectedItem=null,e.previous=e.options.returnVal())})).on("blur.autocomplete",(function(t,i){i&&(t=i.event),e.options.disabled||(clearTimeout(e.searching),e.closing=setTimeout((function(){e.close(t),e._change(t)}),150))})),this.response=function(){return e._response.apply(e,arguments)},this.menu=$("<ul></ul>").addClass("ui-sumocomplete ui-front").appendTo($(this.options.appendTo||"body",i)[0]).on("mousedown",(function(t){var i=e.menu.element[0];$(t.target).closest(".ui-menu-item").length||setTimeout((function(){$(document).one("mousedown",(function(t){t.target===e.element[0]||t.target===i||$.contains(i,t.target)||e.close()}))}),1),setTimeout((function(){clearTimeout(e.closing)}),13)})).on("mouseenter",(function(){e.refreshNoFirstFocusFlag=!1})).menu({focus:function(t,i){e.refreshNoFirstFocusFlag&&(e.refreshNoFirstFocusFlag=!1,e.menu.blur())},select:function(t,n){var o=n.item.data("ui-autocomplete-item"),s=e.previous;e.element[0]!==i.activeElement&&(e.previous=s,setTimeout((function(){e.previous=s,e.selectedItem=o,e.options.editor&&e.options.editor.focus&&e.options.editor.focus()}),1)),!1!==e._trigger("select",t,{item:o})&&e.element.val(o.value),e.term=e.options.returnVal(),e.close(t),e.selectedItem=o},blur:function(t,i){e.menu.element.is(":visible")&&e.element.val()!==e.term&&e.element.val(e.term)}}).hide().data("uiMenu")},_init:function(){},destroy:function(){this.element.off(),this.menu.element.remove(),$.Widget.prototype.destroy.call(this)},_setOption:function(t,e){$.Widget.prototype._setOption.apply(this,arguments),"appendTo"===t&&this.menu.element.appendTo($(e||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},search:function(t,e){var i=null;return(t=null!=t?t:this.options.returnVal())instanceof Object&&"string"==typeof t.string&&(t=(i=t).string),this.term=this.options.returnVal(),t.length<this.options.minLength?this.close(e):(clearTimeout(this.closing),!1!==this._trigger("search",e)?this._search(t,i):void 0)},_search:function(t,e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.options.source({term:t,token:e},this.response)},_response:function(t,e,i){!this.options.disabled&&(t&&t.length||e||i)?(t=this._normalize(t),this._suggest(t,e,i),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(t){clearTimeout(this.closing),this.menu.element.is(":hidden")||(this.menu.element.hide(),this.menu.blur(),this._trigger("close",t))},_change:function(t){this.previous!==this.options.returnVal()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:$.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:$.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t,e,i){var n=this.menu.element.empty();this._renderMenu(n,t,e,i),this.menu.blur(),this.menu.refresh(),n.show(),this._resizeMenu(),this.reposition(),this.options.autoFocus&&this.menu.next(new $.Event("mouseover")),this.refreshNoFirstFocusFlag=!0},_resizeMenu:function(){var t=this.menu.element;this.options.forceDefaultWidth||t.outerWidth(Math.max(t.width("").outerWidth(),Math.min(this.options.minWidth,this.element.outerWidth())))},_renderMenu:function(t,e,i,n){var o,s,r=this,a="";n&&(a=$("<div></div>").addClass("ui-sumocomplete-errors-body").html(n),i||e&&0!=e.length||a.addClass("ui-sumocomplete-errors-no-completions"),t.append($("<li></li>").addClass("ui-sumocomplete-errors").append(a))),i&&(i.title&&(o=$("<div></div>").addClass("ui-sumocomplete-description-title").html(i.title)),i.html&&(a=$("<div></div>").addClass("ui-sumocomplete-description-body").html(i.html)),s=$("<div></div>").append(o).append(a),t.append($("<li></li>").addClass("ui-sumocomplete-description").addClass(i.className).append(s))),$.each(e,(function(e,i){r._renderItem(t,i)}))},_renderItem:function(t,e){var i,n=null,o=null,s=null;return e.type&&(o=$("<div></div>").css("float","right").addClass("sumocomplete-type").text(e.type)),e.helpId?n=$("<a></a>").attr("href","#").attr("title",this.options.helpTooltip).css("float","right").addClass("sumocomplete-help-link").on("click",(function(t){SumoApp.getAngularService("helpNavigationService").showHelp({id:e.helpId}),t.stopPropagation(),t.preventDefault()})):o&&o.addClass("sumocomplete-type-no-help"),e.desc&&(s=$("<div></div>").addClass("sumocomplete-desc").text(e.desc)),i=$("<div></div>").append(n||"").append(o||"").append($("<a></a>").attr("title",e.label).text(e.label).append(s)),$("<li></li>").addClass("sumocomplete-item").data("ui-autocomplete-item",e).append(i).appendTo(t)},_move:function(t,e){this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?this.menu.blur():this.menu[t](e):this.search(null,e)},reposition:function(){this.menu.element.position($.extend(this.options.returnPos(),this.options.position))},isOpen:function(){return this.menu.element.is(":visible")},keydown:function(t,e){return this.element.trigger("keydown.autocomplete",{event:t,result:e})},keypress:function(t,e){return this.element.trigger("keypress.autocomplete",t,{event:t,result:e})},editorFocus:function(t){return this.element.trigger("focus.autocomplete",t,{event:t})},editorBlur:function(t){return this.element.trigger("blur.autocomplete",t,{event:t})}}),$.extend($.ui.sumocomplete,{escapeRegex:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filterAnywhere:function(t,e){var i=new RegExp($.ui.sumocomplete.escapeRegex(e),"i");return $.grep(t,(function(t){return i.test(t.label||t.value||t)}))},filterPrefix:function(t,e){var i=new RegExp("^"+$.ui.sumocomplete.escapeRegex(e),"i");return $.grep(t,(function(t){return i.test(t.label||t.value||t)||$.ui.sumocomplete.fuzzyMatch(t,e)}))},fuzzyMatch:function(t,e){var i=new RegExp("^[\\W*]*"+$.ui.sumocomplete.escapeRegex(e),"i");return i&&i.test(t)},__noOpProperty:{}});